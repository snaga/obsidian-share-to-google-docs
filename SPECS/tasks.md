### 💖 Share to Google Docs 開発タスクリスト ver. ギャル 💖

---

うちらが最強のプラグインをリリースするまでの道のりをタスクにしてみたよ！
これを一個ずつクリアしていけば、絶対うまくいくっしょ！いっちょやりますか！💪✨

---

#### Milestone 1: まずは土台作りと鬼大事な認証から！

プラグインの骨格を作って、最重要ミッションのGoogleアカウント連携を終わらせちゃお！

-   [x] **環境構築**
    -   [x] `googleapis` っていうGoogle APIを使いやすくするライブラリを`npm`で入れる。
    -   [x] ローカルサーバーで使う`http`っていうライブラリの型定義 (`@types/node`) も入れとく。
    -   [x] ビルド設定（`esbuild.config.mjs`）を修正して、Node.jsのモジュールがちゃんと解決できるようにする。
-   [x] **ファイル構成の整備**
    -   [x] ソースコードを管理する`src`フォルダを作成する。
    -   [x] `main.ts`を`src`フォルダに移動し、ビルド設定を更新する。
    -   [x] `types.ts`, `settings.ts`, `auth.ts`, `googleApiClient.ts`, `obsidianHelper.ts` のファイルを作成する。
-   [x] **データモデル定義 (`types.ts`)**
    -   [x] `PluginSettings` と `GoogleAuthTokens` の型をTypeScriptのインターフェースで作っとく。
-   [x] **Obsidianヘルパー (`obsidianHelper.ts`) の実装**
    -   [x] 今開いてるファイルの中身とタイトルをGETする関数を実装する。
-   [x] **Google OAuthハンドラー (`auth.ts`) の実装**
    -   [x] Googleの認証画面に飛ぶためのURLを生成するロジックを実装！
    -   [x] 認証が終わった連絡を受け取るためのローカルサーバーを立てたり閉じたりする処理を実装！
    -   [x] 認証コードをアクセストークンとリフレッシュトークンに交換して、ちゃんと保存する処理を実装！
    -   [x] アクセストークンが古くなったら、裏でこっそり新しいのをGETし直す処理も実装！
-   [x] **設定画面 (`settings.ts`) の実装**
    -   [x] プラグインの設定画面で、GoogleのClient IDとClient Secretを入力できるようにする。
    -   [x] アカウント連携してるかしてないか見えるようにする。
    -   [x] 「Googleアカウントと連携」「連携解除」ボタンを実装する。

---

#### Milestone 2: メイン機能！ファイルエクスポートいくぞ！

認証ができたら、いよいよメインディッシュのMarkdownエクスポート機能を実装するよ！

-   [x] **Google APIクライアント (`googleApiClient.ts`) の実装**
    -   [x] アクセストークンを使って、Google Drive APIにリクエストを送るための基本の仕組みを実装する。
    -   [x] Markdownのテキストを、Google Driveに`.md`ファイルとしてアップロードする関数を実装！
    -   [x] Driveにある`.md`ファイルを、Googleドキュメントに華麗に変換コピーする関数を実装！
    -   [x] 用済みになった`.md`ファイルをゴミ箱に移動させる処理を実装！
-   [x] **メイン機能の統合 (`main.ts`)**
    -   [x] リボンにエクスポート用のイケてるアイコンを追加する。
    -   [x] コマンドパレットにも「Google Docsへエクスポート」コマンドを追加！
    -   [x] アイコンをポチるかコマンドを実行したら、エクスポート処理が動くように、全体の流れを実装する。
-   [x] **UIの仕上げ**
    -   [x] エクスポート中は「エクスポート中...🚀」って通知を出し、終わったら結果を同じ通知で表示するように改善！
    -   [x] トークン更新時など、裏方の処理で余計な通知が出ないように修正！

---

#### Milestone 3: 最終仕上げ！コードもドキュメントもピカピカに！

最後に、コードをキレイにして、みんなが使えるようにドキュメントを整えたらマジ完璧！

-   [ ] **コードのリファクタリング**
    -   [ ] コード全体をチェックして、イケてない部分を修正したり、分かりやすく整理したりする。
    -   [ ] 未来のうちらが見ても分かるように、コメントとかもちゃんと書いとく。
-   [x] **UIの改善**
    -   [x] プラグインの名前や説明を `manifest.json` でイケてる感じに更新する。
    -   [x] 設定画面のClient IDとSecretの入力欄をパスワード形式にして、入力内容が見えないようにする。
-   [x] **ドキュメントの更新**
    -   [x] ここまでの変更点を、`requirements.md`, `design.md`, `tasks.md` に全部反映させる。
    -   [ ] `README.md` に、プラグインのインストール方法、設定方法、使い方を、誰が読んでも分かるように書く。
    -   [ ] リリースするなら、リリースノートもちゃんと書く！

---
### 🚀 将来の拡張タスク 🚀

---

#### Milestone X: 認証サーバー導入で神プラグインへ！

ユーザー体験を神にするための、未来のタスク！

-   [ ] **認証用中継サーバーの技術選定**: どこでサーバー動かすか決める (Vercel? Netlify? Fly.io?)
-   [ ] **サーバーサイドの認証フローを実装する**: うちらのID/Secretを使ってGoogleと話すサーバー側のプログラムを作る。
-   [ ] **プラグイン側の認証フローを修正する**: PC内で完結する今のやり方から、うちらのサーバーと通信するやり方に変更する。
-   [ ] **Googleのアプリ審査を申請する**: うちらのプラグインが安全だってことをGoogleに認めてもらう。